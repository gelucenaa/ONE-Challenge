<!DOCTYPE html>

<html lang="es">

    <head>
        <meta charset="UTF-8">

        <title>Encriptador</title>
        <link rel="stylesheet" href="reset.css">
        <link rel="stylesheet" href="style-encriptador.css">
    </head>
    <body>
        <header>


        </header>
        <main>
            <div class="contenedor" style="float: left">
                <img src="imagenes/Vector.jpg">
            </div>
            <div>   
                <h1 class="texto">ONE - Alura Challenge: Encriptador</h1>
            </div>

            <form id="eForm">
                <div>
                
                    <!--<textarea cols="70" rows="10" id="mensaje" class="input-box"></textarea>-->


                    <!--<input type="text" class="textbox1" id="textoEntrada" autofocus value="Ingrese el texto aquÃ­">-->

                    <input type="text" class="textbox1" id="textoEntrada" autofocus pattern="[a-z]">
                    
                    <input type="text" class="textbox2" id="textoSalida">

                    <input type="image" class="textbox3" id="textoSalidaImg" src="imagenes/texto-no-encontrado.png"  >
                   <!--
                     

                    -->

                    <br />


                </div>
                <div>
                    <p class="advertencia"> Solo letras minusculas y sin acentos </p>
                    <button type="button" class="boton1" onclick="encriptar()" > Encriptar</button>
                    <button type="button" class="boton2" onclick="desencriptar()"> Desencriptar</button>
                    <button type="button" class="boton3" onclick="copiar()"> Copiar</button>

                </div>
                <script>

                    function encriptar () {

                        
                        var texto = document.getElementById("textoEntrada");
                        var mensaje = "";
                        var array2Enc = [];
                        var arrayFinal = [];

                        var letra;

                        //console.log(texto);
                        //alert(texto.value);

                        array2Enc = texto.value.split('');

                        //Llaves de encriptacion
                        //La letra "a" es convertida para "ai"
                        //La letra "e" es convertida para "enter"
                        //La letra "i" es convertida para "imes"
                        //La letra "o" es convertida para "ober"
                        //La letra "u" es convertida para "ufat"
                        
                        //console.log(array2Enc);

                        for (let i=0; i < array2Enc.length; i++ ) { 
                            console.log(array2Enc[i]);
                            letra = array2Enc[i];

                            if (letra == "a"){
                                arrayFinal.push("ai");
                            } else if (letra == "e") {
                                arrayFinal.push("enter");
                            } else if (letra == "i") {
                                arrayFinal.push("imes");
                            } else if (letra == "o") {
                                arrayFinal.push("ober");
                            } else if (letra == "u") {
                                arrayFinal.push("ufat");
                            } else {
                                arrayFinal.push(letra);
                            }
                            console.log(arrayFinal[i]);
                            mensaje = mensaje + arrayFinal[i];
                        }

                        //console.log(mensaje);
                        document.getElementById("textoSalidaImg").style.display = "none";
                        document.getElementById("textoSalida").value = mensaje
                    }

                    function desencriptar () {
                        var texto = document.getElementById("textoEntrada");
                        var mensaje = "";
                        var array2Desenc = [];
                        var arrayFinalD = [];
                        var j = 0;
                        var letra;


                        array2Desenc = texto.value.split('');

                        //Llaves de encriptacion
                        //La letra "a" es convertida para "ai"
                        //La letra "e" es convertida para "enter"
                        //La letra "i" es convertida para "imes"
                        //La letra "o" es convertida para "ober"
                        //La letra "u" es convertida para "ufat"
                        
                        console.log(array2Desenc);

                        for (let i=0; i < array2Desenc.length; i++ ) { 
                            console.log(array2Desenc[i]);
                            letra = array2Desenc[i];

                            if (letra == "a"){
                                j = i + 1;
                                if (array2Desenc[j] = "i"){
                                    i++;
                                }
                                arrayFinalD.push("a");
                            } else if (letra == "e") {
                                j = i + 1;
                                if (array2Desenc[j] = "n"){
                                    j++;
                                    if (array2Desenc[j] = "t"){
                                        j++;
                                        if (array2Desenc[j] = "e"){
                                            j++;
                                            if (array2Desenc[j] = "r"){
                                                arrayFinalD.push("e");
                                                i = i + 4; 
                                            }
                                        }
                                    }
                                } else {
                                    arrayFinalD.push(letra);
                                }
                            } else if (letra == "i") {
                                j = i + 1;
                                if (array2Desenc[j] = "m"){
                                    j++;
                                    if (array2Desenc[j] = "e"){
                                        j++;
                                        if (array2Desenc[j] = "s"){
                                            j++;
                                            arrayFinalD.push("i");
                                                i = i + 3;                                         
                                        }
                                    }
                                } else {
                                    arrayFinalD.push(letra);
                                }
                            } else if (letra == "o") {
                                j = i + 1;
                                if (array2Desenc[j] = "b"){
                                    j++;
                                    if (array2Desenc[j] = "e"){
                                        j++;
                                        if (array2Desenc[j] = "r"){
                                            j++;
                                            arrayFinalD.push("o");
                                                i = i + 3;                                         
                                        }
                                    }
                                } else {
                                    arrayFinalD.push(letra);
                                }
                            } else if (letra == "u") {
                                j = i + 1;
                                if (array2Desenc[j] = "f"){
                                    j++;
                                    if (array2Desenc[j] = "a"){
                                        j++;
                                        if (array2Desenc[j] = "t"){
                                            j++;
                                            arrayFinalD.push("u");
                                                i = i + 3;                                         
                                        }
                                    }
                                } else {
                                    arrayFinalD.push(letra);
                                }
                            } else {
                                arrayFinalD.push(letra);
                            }
                            mensaje = mensaje + letra;
                        }

                        document.getElementById("textoSalida").value = mensaje
                    }

                function copiar () {
                      // Get the text field
                    var copyText = document.getElementById("textoSalida");

                    // Select the text field
                    copyText.select();
                    copyText.setSelectionRange(0, 99999); // For mobile devices

                     // Copy the text inside the text field
                    navigator.clipboard.writeText(copyText.value);

                    // Alert the copied text
                    alert("Texto copiado: " + copyText.value);

                    //tomado de https://www.w3schools.com/howto/howto_js_copy_clipboard.asp
                }

                </script>
            </form>


        </main>
    <footer>
        <div class="pie">
            <h3>Desarrollado por Gonzalo Lucena - Mayo 2023</h3>

        </div>

    </footer>
</body>
</html>